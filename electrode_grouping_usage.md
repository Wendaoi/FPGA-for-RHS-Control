# 电极分组功能使用说明

## 概述
本设计支持将电极分为10组，每组最多包含8个电极。每组电极在每个SPI操作周期中可以分别定义其作用（收集电位信号或发送刺激），并且电极的作用可以根据当前游戏参数动态变化。

## 电极分组配置

### 电极分组映射
默认情况下，电极按照以下方式分组：
- Group 0: 电极 0-7
- Group 1: 电极 8-15
- Group 2: 电极 16-23
- Group 3: 电极 24-31
- Group 4: 电极 32-39
- Group 5: 电极 40-47
- Group 6: 电极 48-55
- Group 7: 电极 56-63
- Group 8: 电极 64-71
- Group 9: 电极 72-79

### 电极功能配置
每组电极可以配置为以下功能：
- 00: 收集电位信号
- 01: 发送刺激
- 10: 高阻态（保留）

## SPI指令格式

### 电极分组配置指令
```
[31:28] 指令类型 (0001: 电极分组配置)
[27:24] 组号 (0-9)
[23:22] 功能选择 (00: 收集信号, 01: 发送刺激, 10: 高阻态)
[21:0]  保留位
```

### 示例指令
```
// 配置组0为收集信号
32'h10000000

// 配置组1为发送刺激
32'h11400000

// 配置组2为高阻态
32'h12800000
```

## 模块接口说明

### enhanced_bypass_controller
主控制器模块，负责协调各子模块工作。

### data_input_module
数据输入模块，根据电极分组配置决定是否捕获电极数据。

### filter_processing_module
滤波处理模块，根据电极分组配置决定是否对电极信号进行滤波处理。

### data_output_module
数据输出模块，生成包含电极分组配置的SPI指令。

## 使用流程

1. 通过SPI发送电极分组配置指令
2. 系统根据配置更新电极功能
3. 在数据采集阶段，系统根据配置决定是否捕获电极数据
4. 在信号处理阶段，系统根据配置决定是否对电极信号进行滤波处理
5. 系统根据当前游戏模式和电极配置生成相应的SPI指令

## 注意事项

1. 电极分组配置在系统复位时会恢复默认值
2. 发送刺激的电极不会进行数据采集和滤波处理
3. 电极分组配置可以动态修改，以适应不同的游戏场景